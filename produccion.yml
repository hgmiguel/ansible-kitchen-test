---
- hosts: promoted-builds
  become: true
  roles:
  - library/geerlingguy.jenkins
  tasks:
  - name: config jenkins devops-compile job
    jenkins_job:
      config: "{{ lookup('file', 'templates/devops-compile.xml') }}"
      name: devops-compile
      url: "http://{{ jenkins_hostname }}:{{ jenkins_http_port }}{{ jenkins_url_prefix }}"
      password: "{{ jenkins_admin_username }}"
      user: "{{ jenkins_admin_password }}"
  - name: config jenkins devops-deploy job
    jenkins_job:
      config: "{{ lookup('file', 'templates/devops-deploy.xml') }}"
      name: devops-deploy
      url: "http://{{ jenkins_hostname }}:{{ jenkins_http_port }}{{ jenkins_url_prefix }}"
      password: "{{ jenkins_admin_username }}"
      user: "{{ jenkins_admin_password }}"

