---
driver:
  name: docker
  binary: docker
  use_sudo: false

provisioner:
  name: ansible_push
  idempotency_test: false
  verbose: "v" # verbose level v, vv, vvv, vvvv
  chef_bootstrap_url: nil

verifier:
  name: serverspec
  remote_exec: false

platforms:
  - name: ubuntu-16.04
    driver_config:
      provision_command:
      - apt-get update
      - apt-get upgrade -y
      - apt-get -q -y install python 
      image: ubuntu:16.04

suites:
  - name: jenkins
    verifier:
      patterns:
        - test/integration/default/serverspec/*_spec.rb
    provisioner:
      mygroup: 
      - promoted-builds
      playbook: jenkins-promoted-builds.yml
    driver_config:
      forward: 
        - 8080
  - name: localhost
    verifier:
      patterns:
        - test/integration/default/serverspec/*_spec.rb
    provisioner:
      mygroup: 
      - localhost
      playbook: localhost.yml
    driver_config:
      hostname: localhost

